<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Document</title>
  <link href="main.css" rel="stylesheet">

</head>
<body>
<div id="text"><input id="zone" readonly type="text" value="0"></div>
<div id="big">
  <div id="left">
    <input class="button" id="C" onclick="suprall()" type="button" value="C">
    <input class="button" id="diviser" onclick="faire('/')" type="button" value="/">
    <input class="button" id="x" onclick="faire('x')" type="button" value="x">
    
    <input class="button" id="sept" onclick="affiche ('7')" type="button" value="7">
    <input class="button" id="huit" onclick="affiche ('8')" type="button" value="8">
    <input class="button" id="neuf" onclick="affiche ('9')" type="button" value="9">
    
    <input class="button" id="quatre" onclick="affiche ('4')" type="button" value="4">
    <input class="button" id="cinq" onclick="affiche ('5')" type="button" value="5">
    <input class="button" id="six" onclick="affiche ('6')" type="button" value="6">
    
    <input class="button" id="un" onclick="affiche ('1')" type="button" value="1">
    <input class="button" id="deux" onclick="affiche ('2')" type="button" value="2">
    <input class="button" id="trois" onclick="affiche ('3')" type="button" value="3">
    <input class="button" id="zero" onclick="affiche ('0')" type="button" value="0">
    <input class="button" id="point" onclick="affiche ('.')" type="button" value=".">
  </div>
  <div id="droite">
    <input class="button" id="retour" onclick="suprim()" type="button" value="suppr">
    <input class="button" id="moins" onclick="faire('-')" type="button" value="-">
    <input class="button" id="+" onclick="faire('+')" type="button" value="+">
    <input class="button" id="VALIDER" onclick="calculer()" type="button" value="=">
  </div>
</div>
<script>
    var a, b;
    var SelectedOp = '';
    var OpClicked = false;

    function affiche(x) {
        if (x === '.') {
            document.getElementById('point').disabled = true;
            addToResult('.');
            OpClicked = false;
        }
        if (jeViensDeCliquerSurUnOperateurOuLeResultatEst0()) {
            setResult(x);
        } else {
            addToResult(x);
        }
        OpClicked = false;
    }

    function jeViensDeCliquerSurUnOperateurOuLeResultatEst0() {
        return document.getElementById('zone').value === '0' || OpClicked === true;
    }

    function faire(x) {
        document.getElementById('point');
        OpClicked = true;
        SelectedOp = x;
        a = document.getElementById('zone').value;
    }

    function calculer() {
        let currentValue = document.getElementById('zone').value;
        if (isNaN(currentValue)) {
            alert('la valeur courante est un message');
            return;
        }
        switch (SelectedOp) {
            case '+':
                setResult(parseFloat(a) + parseFloat(currentValue));
                break;
            case '-':
                setResult(parseFloat(a) - parseFloat(currentValue));
                break;
            case '*':
                setResult(parseFloat(a) * parseFloat(currentValue));
                break;
            case '/':
                if (currentValue !== 0) {
                    setResult(parseFloat(a) / parseFloat(currentValue));
                } else {
                    setResult('division par 0 !');
                }
                break;
        }
        SelectedOp = '';
    }

    function addToResult(caractere) {
        document.getElementById('zone').value += caractere;
    }

    function setResult(res) {
        document.getElementById('zone').value = res;
    }

    function suprim(x) {
        let currentValue = document.getElementById('zone').value.toString();
        if (currentValue) {
            setResult(currentValue.length === 1 ? 0 : currentValue.substr(0,currentValue.length - 1));
        }
    }

    function suprall(x) {
        setResult('0');
    }
</script>
</body>

</html>
